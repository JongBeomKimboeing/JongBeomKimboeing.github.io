---
layout: post
title: Statics
description: "Statics"
modified: 2020-06-25
tags: [Statics]
categories: [Statics]
---

# 1. 범주형 자료
질적 자료로 수치로 측정이 불가능한 자료이다(로지스틱 회귀분석에 사용) ex) 성별, 지역, 혈액형 <br>
특징: 다수의 범주가 반복해서 관측되고, 관측값의 크기보다 포함되는 범주에 관심이있다.

<br>
<br>
<br>
<br>

# 1-1. 범주형 자료의 요약: 도수
## 1) 도수분포표
1. 도수 (frequency): 각 범주에 속하는 관측값의 개수 (코드: value_counts()) <br>
2. 상대도수 (Relative frequency): 도수를 자료의 전체 개수로 나눈 비율 (코드: value_counts(normalize=True)) <br>
3. 도수분포표 (Frequency Table): 범주형 자료에서 범주와 그 범주에 대응하는 도수, 상대도수를 나열해 표로 만든 것

<br>
<br>

## 2) 도수분포표를 구하는 파이썬 코드
- 한 가지 범주의 도수분포표
```python

pd.crosstab(index=범주, columns="count") 
# -> index로 설정한 범주에 해당하는 도수를 계산하여 도수분포표를 제작

```

<br>

- 두 가지 범주의 도수분포표
```python

pd.crosstab(index= 범주, columns= 또 다른 범주)
# -> index로 설정한 범주와 columns로 설정한 범주를 모두 만족하는 도수를 계산하여 도수분포표로 제작

```
그러므로, 몇개의 기준으로 둘 것인지에 따라 다양한 도수분포표를 만들 수 있다.

<br>
<br>

## 3) 도수 예시
- 술자리 참여 도수 계산
-> value_counts()를 이용하여 도수를 계산한다.

```python
import pandas as pd
import numpy as np

# drink 데이터
drink = pd.read_csv("drink.csv")
# 도수 계산
drink_freq = drink[drink['Attend'] == 1]['Name'].value_counts()

print("도수 계산")
print(drink_freq)
```

<br>
<br>

## 4) 상대 도수 예시
- value_counts(normalize=True)를 이용하여 상대도수를 만들어준다.

```python
import pandas as pd
import numpy as np

# drink 데이터
drink = pd.read_csv("drink.csv")
#상대도수 계산
drink_relfreq = drink[drink['Attend'] == 1]['Name'].value_counts(normalize=True)
# normalize=True를 이용하여 상대도수를 만들어준다.

print("상대도수 계산")
print(drink_relfreq)
```

<br>
<br>

## 5) 한 가지 범주의 도수분포표 예시

- 전체 술자리 참석 횟수를 확인하는 도수분포표

- pd.crosstab(index= drink['Attend'], columns="count") 를 이용해 <br>
한가지 범주의 도수분포표를 만든다

```python
import pandas as pd
import numpy as np

# drink 데이터
drink = pd.read_csv("drink.csv")


# 전체 참석 횟수를 확인하는 도수분포표
drink_tab = pd.crosstab(index= drink['Attend'], columns="count")

print("전체 참석 횟수를 확인하는 도수분포표")
print(drink_tab)
'''
결과:
전체 참석 횟수를 확인하는 도수분포표
col_0   count
Attend       
0          13
1          12
'''
```

<br>
<br>

## 6) 두 가지 범주의 도수분포표 예시
- 누가 몇 번 참석했는지 알 수 있는 도수분포표
- (index=drink['Attend'], columns=drink['Name']) 


```python
import pandas as pd
import numpy as np

# drink 데이터
drink = pd.read_csv("drink.csv")

drink_who = pd.crosstab(index=drink['Attend'], columns=drink['Name'])

print("누가 몇 번 참석했는지 알 수 있는 도수분포표")
print(drink_who)

'''
누가 몇 번 참석했는지 알 수 있는 도수분포표
Name    A  B  C  D  E
Attend               
0       1  2  3  3  4
1       4  3  2  2  1
'''
```

<br>
<br>
<br>
<br>

# 1-2. 범주형 자료의 그래프

<br>
<br>

## 1) 원형그래프 (pie chart)
- 원형그래프를 통해 범주형 데이터를 표현한다.
- 코드: plt.pie(수치, labels=라벨)

```python
import matplotlib.pyplot as plt

# 술자리 참석 상대도수 데이터
labels = ['A', 'B', 'C', 'D', 'E']
ratio = [33, 25, 17, 17, 8]

# 원형 그래프
fig, ax = plt.subplots()
ax.pie(ratio, labels=labels)
## Q1. 원형 그래프를 만드는 코드를 작성해 주세요
##
plt.show()
```

<br>
<br>

## 2) 막대그래프 (bar)

```python
import matplotlib.pyplot as plt

# 술자리 참석 상대도수 데이터
labels = ['A', 'B', 'C', 'D', 'E']
ratio = [33, 25, 17, 17, 8]

# 막대 그래프
fig, ax = plt.subplots()
ax.bar(labels, ratio)
## Q1. 막대 그래프를 만드는 코드를 작성해 주세요

##
plt.show()
```

<br>
<br>
<br>
<br>

# 2. 수치형 자료

## 1) 수치형 자료의 종류

- 이산형 자료 -> 관측된 수치형 자료가 셀 수 있는 경우
- 연속형 자료 -> 수치형 자료가 연속적으로 관측

<br>
<br>
<br>
<br>

# 2-1. 수치형 자료의 요약

## 1) 점도표
- 점도표: 관측의 개수가 상대적으로 적은 경우 사용한다.(20 또는 25이하) <br>
자료 전체의 개요를 파악 가능하고, 모든 자료를 나타낼 수 있도록 줄 위에 각 관측값에 해당되는 점을 찍어 표시한다.

<br>
<br>

## 2) 도수분포표
- 각 관측값에 대한 도수를 측정하여 도수분포표를 작성
- 연속형 자료의 경우 다수의 구간(계급)으로 나누고, 각 구간마다 관측값의 개수(도수)로 작성한다.

<br>
<br>

## 3) 히스토그램 그리기
히스토그램: <br>
연속형 자료의 도수분포표를 기반으로 각 계급을 범주처럼 사용한다.<br>
범주형 자료의 막대그래프와 같은 방식으로 그린다.<br>
즉, 각 구간에 해당하는 데이터의 도수(개수)를 막대그래프로 나타내는 것이다.<br>

<br>

히스토그램 특징:
1) 히스토그램의 전체 면적은 1이다. <br>
2) 모든 계급구간의 폭이 같으면 도수, 상대도수를 막대 높이로 사용한다. <br>

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.font_manager as fm
# 주량 데이터
font = fm.FontProperties(fname='./NanumBarunGothic.ttf')
drink_cup = pd.DataFrame({'cup' :[22,7,19,3,10,8,19,7,15,9,35,5],
                          'who' : [ 'A', 'E', 'D', 'B', 'C','A','A','A','D','B', 'C','B'],
                          'stems' : [2,0,1,0,1,0,1,0,1,0,3,0]})

print(drink_cup)

fig, ax = plt.subplots()
## 히스토그램을 그리는 코드를 작성해 주세요
plt.hist(drink_cup['cup'])
plt.xlabel('주량 범주',fontproperties=font)
plt.ylabel('주량에 해당하는 명수',fontproperties=font)
##
plt.show()
```
![image](/assets/Figure_1.png)

<br>
<br>

## 4) 도수 다각형

- 도수 다각형의 특징
1) 각 계급구간의 중앙에 점을 찍어 직선으로 연결함<br>
2) 관측값의 집중된 위치, 정도, 치우친 정도, 꼬리의 두터움 등 분포의 상태를 쉽게 파악가능<br>
3) 관측값의 변화에 따라 도수 또는 상대도수의 변화를 잘 나타낸다.<br>

<br>
<br>

## 5) 도수 다각형 vs 히스토그램
히스토그램은 옆으로 나열하여 자료를 비교한다.<br>
도수다각형은 꺾은선으로 표시하여 자료를 비교한다.<br>
여러 자료를 비교하기 위해서는 도수다각형이 히스토그램보다 알맞다.<br>

<br>
<br>

## 6) 줄기 잎 그리기 (어느 구간에 데이터가 모여있는지 한눈에 볼 수 있다.)

### 줄기-잎 그림 자료 정리 방법

<br>

예) 관측값의 자리수가 최대 두자리 일 때 <br>
관측값=35  ->  앞단위: 3  +  뒷단위:5 <br>
1) 관측값을 보고 앞 단위와 뒷 단위를 정한다. <br>
2) 앞 단위를 줄기로하여 세로로 배열하고 수직선을 그린다. <br>
3) 뒷 단위를 잎으로 하여 관측값을 앞단위 오른쪽에 오름차순으로 기입한다. <br>
<br>
<pre>
ex) 22, 7, 19, 35 
줄기 | 잎 
 0   | 7 
 1   | 9 
 2   | 2 
 3   | 5 
 </pre>
 

### 그리기
- 다음과 같이 plt.stem(줄기, 관측값')으로 그린다.
- 함수 사용시에 줄기값을 따로 지정해줘야한다. 왜냐하면, 줄기를 데이터마다 다르게 설정할 수 있기 때문이다.

<br>

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

# 주량 데이터
drink_cup = pd.DataFrame({'cup' :[22,7,19,3,10,8,19,7,15,9,35,5],
                          'who' : [ 'A', 'E', 'D', 'B', 'C','A','A','A','D','B', 'C','B'],
                          'stems' : [2,0,1,0,1,0,1,0,1,0,3,0]})

print(drink_cup)

fig, ax = plt.subplots()
## 줄기-잎 그림을 그리는 코드를 작성해 주세요
plt.stem(drink_cup['stems'], drink_cup['cup'],use_line_collection=True) # 다음과 같이 plt.stem(줄기, 관측값')으로 그린다.
##
plt.show()
```
![image](/assets/Figure_2.png)


<br>
<br>
<br>
<br>

# 3. 논리적인 자료의 요약

<br>
<br>

## 3-1. 수치를 통한 연속형 자료 요약

그림이나 도표에 의한 분석의 단점 <br>
-> 작성자의 주관적인 판단에 따라 달라지므로 일관성 및 객관성이 부족하다. <br>
-> 시각적 자료로는 이론적 근거 제시가 쉽지 않다. <br>
<br>
많은 양의 자료를 의미 있는 수치로 요약하여 <br>
대략적인 분포상태를 파악 가능하므로, 단점 보완이 가능하다. <br>
(즉, 의미 있는 수치로 요약하여 분포상태를 파악한다.) <br>

<br>
<br>

## 3-2. 중심위치의 측도
중심위치의 측도는 어떤 값을 중심으로 하느냐이다.<br>
중심위치의 측도로는 평균, 중앙값, 최빈값이 있다.<br>

<br>
<br>

### 1) 평균
#### np.mean()
<br>
평균: <br>
1) 중심 위치의 측도 중에서 가장 많이 사용되는 방법이다. <br>
2) 모든 관측값의 합을 자료의 개수로 나눈 것이다 <br>
3) 관측값들의 무게중심이다. <br>
<br>
평균의 특징: <br>
1) 관측값의 산술평균으로 사용한다. <br>
2) 통계에서 기초적인 통계 수치로 가장 많이 사용된다. <br>
3) 극단적으로 큰 값이나 작은 값의 영향을 많이 받는다. <br>

<br>


- 평균 계산 코드

```python
import numpy as np
from scipy import stats

coffee = np.array([202,177,121,148,89,121,137,158])

#평균계산
cf_mean = np.mean(coffee)
print("Mean :", round(cf_mean,2)) #round() -> 반올림하는 함수이다 round(cf_mean,2) 여기서 2는 소수2째 자리에서 반올림이다.
```

<br>
<br>



### 2) 중앙값
#### np.median()
<br>
중앙값:<br>
1) 전체 관측값을 정렬했을 때 가운데에 위치하는 값<br>
2) 자료의 개수(n)가 홀수인 경우 -> (n+1)/2 번재 관측값<br>
3) 자료의 개수(n)가 짝수인 경우 -> n/2 번째 관측값과 (n+1)/2 번째 관측값의 평균<br>
<br>
중앙값의 특징:<br>
1) 관측값을 크기 순서대로 배열할 때 중앙에 위치<br>
2) 가운데에 위치한 값 이외의 값의 크기는 중요하지 않다.<br>
3) 관측값의 변화에 민감하지 않고, 극단 값의 영향을 받지 않는다.<br>

<br>
<br>

- 중앙값 계산 코드

```python
import numpy as np
from scipy import stats

coffee = np.array([202,177,121,148,89,121,137,158])

#중앙값 계산
cf_median = np.median(coffee)
print("Median :", round(cf_median,2))
```

<br>
<br>

### 3) 최빈값
#### stats.mode()
<br>
최빈값:<br>
1) 관측값 중 가장 자주 나오는 값<br>
2) 이산형/범주형 자료에서 많이 사용된다.<br>
<br>
최빈값 특징:<br>
1) 연속형 자료에서 같은 값이 나오는 경우는 흔치 않으므로 최빈값을 사용하기 부적절하다.<br>
2) 단봉형 분포를 갖는 자료에서만 유용한다.<br>

<br>

```python
import numpy as np
from scipy import stats

coffee = np.array([202,177,121,148,89,121,137,158])

#최빈값 계산
cf_mode = stats.mode(coffee)
print("Mode :", cf_mode[0][0])
```

<br>
<br>

### 4) 평균, 중앙값, 최빈값의 비교
<br>
실제 사용 빈도:<br>
평균 > 중앙값 > 최빈값<br>
<br>
극단값의 영향을 배제하고 싶을 경우 -> 중앙값 사용<br>
전체 관측값을 모두 포함하고 싶은 경우 -> 평균 사용<br>

<br>
<br>
<br>
<br>

# 4. 퍼진 정도의 측도

<br>

중심위치만으로 분포를 파악하기에는 부족하다.<br>
그러므로, 중심위치 측도 외에 분포가 퍼진 정도를 측도할 수치가 필요하다.<br>
-> 분산, 표준편차, 범위, 사분위수 등을 퍼진 정도의 측도로 사용한다.<br>

<br>
<br>

## 4-1 분산
### variance()

### 1) 분산의 정의
1. 자료가 얼마나 흩어졌는지 숫자로 표현한다.<br>
2. 각 관측값이 자료의 평균으로부터 떨어진 정도를 의미한다.<br><br>
3. 분산이 작으면, 자료가 평균값에 몰려있고,<br>
   분산이 크면, 자료가 평균값으로부터 흩어져있다.<br>















































